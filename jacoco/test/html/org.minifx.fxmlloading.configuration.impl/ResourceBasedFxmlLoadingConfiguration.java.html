<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ResourceBasedFxmlLoadingConfiguration.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">minifx-fxml</a> &gt; <a href="index.source.html" class="el_package">org.minifx.fxmlloading.configuration.impl</a> &gt; <span class="el_source">ResourceBasedFxmlLoadingConfiguration.java</span></div><h1>ResourceBasedFxmlLoadingConfiguration.java</h1><pre class="source lang-java linenums">/**
 * Copyright (c) 2018 European Organisation for Nuclear Research (CERN), All Rights Reserved.
 */

package org.minifx.fxmlloading.configuration.impl;

import static java.util.Objects.requireNonNull;

import java.net.URL;

import org.minifx.fxmlloading.configuration.FxmlLoadingConfiguration;

public class ResourceBasedFxmlLoadingConfiguration implements FxmlLoadingConfiguration {

    private static final String CSS_SUFFIX = &quot;.css&quot;;
    private static final String FXML_SUFFIX = &quot;.fxml&quot;;

    private final String fullFxmlResourceName;

<span class="nc" id="L20">    private ResourceBasedFxmlLoadingConfiguration(String fullyQualifiedFxmlName) {</span>
<span class="nc" id="L21">        this.fullFxmlResourceName = requireNonNull(fullyQualifiedFxmlName);</span>
<span class="nc bnc" id="L22" title="All 2 branches missed.">        if (this.fullFxmlResourceName.isEmpty()) {</span>
<span class="nc" id="L23">            throw new IllegalArgumentException(&quot;resource name must not be empty.&quot;);</span>
        }
<span class="nc bnc" id="L25" title="All 2 branches missed.">        if (!this.fullFxmlResourceName.endsWith(FXML_SUFFIX)) {</span>
<span class="nc" id="L26">            throw new IllegalArgumentException(&quot;resource name must end in '&quot; + FXML_SUFFIX</span>
                    + &quot;'. This is not the case for given name '&quot; + fullyQualifiedFxmlName + &quot;'.&quot;);
        }
<span class="nc" id="L29">        assertFullyQualified(fullFxmlResourceName);</span>
<span class="nc" id="L30">    }</span>

    @Override
    public URL fxmlResource() {
<span class="nc" id="L34">        return getFullyQualifiedResource(fullFxmlResourceName);</span>
    }

    @Override
    public URL cssResource() {
<span class="nc" id="L39">        return getFullyQualifiedResource(cssResourceName());</span>
    }

    /* Visible for testing */
    String cssResourceName() {
<span class="nc" id="L44">        return fullFxmlResourceName.substring(0, fullFxmlResourceName.length() - FXML_SUFFIX.length()) + CSS_SUFFIX;</span>
    }

    private URL getFullyQualifiedResource(String name) {
<span class="nc" id="L48">        assertFullyQualified(name);</span>
<span class="nc" id="L49">        return ResourceBasedFxmlLoadingConfiguration.class.getResource(name);</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L54">        return &quot;ResourceBasedFxmlLoadingConfiguration [fullFxmlResourceName=&quot; + fullFxmlResourceName + &quot;]&quot;;</span>
    }

    private static void assertFullyQualified(String name) {
<span class="nc bnc" id="L58" title="All 2 branches missed.">        if (!name.startsWith(&quot;/&quot;)) {</span>
<span class="nc" id="L59">            throw new IllegalArgumentException(</span>
                    &quot;resource name must be fully qualified (start with '/') . This is not the case for given name '&quot;
                            + name + &quot;'.&quot;);
        }
<span class="nc" id="L63">    }</span>

    public static ResourceBasedFxmlLoadingConfiguration fromFxml(String fullyQualifiedResourceName) {
<span class="nc" id="L66">        return new ResourceBasedFxmlLoadingConfiguration(fullyQualifiedResourceName);</span>
    }

    @Override
    public String conventionalName() {
<span class="nc" id="L71">        return simpleFileName().replaceAll(FXML_SUFFIX, &quot;&quot;);</span>
    }

    private String simpleFileName() {
<span class="nc" id="L75">        int lastSlash = fullFxmlResourceName.lastIndexOf('/');</span>
<span class="nc" id="L76">        return fullFxmlResourceName.substring(lastSlash + 1);</span>
    }

    @Override
    public String packageName() {
<span class="nc" id="L81">        return fullFxmlResourceName.substring(1, fullFxmlResourceName.length() - simpleFileName().length() - 1)</span>
<span class="nc" id="L82">                .replace('/', '.');</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>